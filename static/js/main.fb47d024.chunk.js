(this.webpackJsonpbeattree=this.webpackJsonpbeattree||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),l=a.n(s),i=a(8),o=a(9),c=a(11),u=a(10),m=a(12),d=a(6),h=a(28),p=a(20),g=a.n(p),E=function(){return function(e){g.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(t){console.log(t),t.data.logged_in&&e({type:"FETCH_ARTIST",artist:t.data.artist,loggedIn:t.data.logged_in,favorites:t.data.favorites,messages:t.data.messages})}))}},f=a(23),b=a(19),v=a(113),O=a(25),S=a.n(O),y=a(27),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSendMessage=function(e){a.props.sendMessage(e,a.state.message),a.setState({message:""}),a.props.fetchArtist()},a.handleAddToFavorites=function(e,t){a.props.addToFavorites(e,a.props.artist.id,t),a.props.fetchArtist()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBeats(),this.props.fetchArtist()}},{key:"render",value:function(){var e=this,t=this.state.message,a=this.props.beats.map((function(e,t){return r.a.createElement(S.a,{id:e.id,className:"react-player",key:e.id,url:e.link,link:e.link,width:"100%",height:"50%"})})).map((function(a){return r.a.createElement(y.a,{className:"main-card"},a,r.a.createElement(b.a,{onClick:function(){e.handleAddToFavorites(a.key,a.props.link)},className:"main-card-buttons"},"ADD TO FAVORITES"),r.a.createElement(v.a,{className:"send-message"},r.a.createElement(v.a.Control,{type:"message",name:"message",placeholder:"message",onChange:function(t){return e.handleChange(t)},value:t})),r.a.createElement(b.a,{type:"submit",onClick:function(){return e.handleSendMessage(a.key)},className:"main-card-buttons"},"SEND MESSAGE"))}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"logo"}," BeatTree "),r.a.createElement("span",null,a))}}]),t}(n.Component),I=Object(d.b)((function(e){return{artist:e.artist.artist,messages:e.artist.messages,favorites:e.artist.favorites,beats:e.beat.beats,loggedIn:e.artist.loggedIn}}),(function(e){return{loadBeats:function(){return e((function(e){g.a.get("http://localhost:3001/artists",{withCredentials:!0}).then((function(t){e({type:"LOAD_BEATS",beats:t.data.artists})}))}))},fetchArtist:function(){return e(E())},addToFavorites:function(t,a,n){return e(function(e,t,a){return function(n){g.a.post("http://localhost:3001/favorites",{favorite_artist_id:e,artist_id:t,link:a},{withCredentials:!0}).then((function(e){n({type:"ADD_TO_FAVORITES",favorites:e.data.favorites.favorite_artist_id})}))}}(t,a,n))},sendMessage:function(t,a,n){return e(function(e,t){return function(a){g.a.post("http://localhost:3001/messages",{artist_id:e,message:t},{withCredentials:!0}).then((function(e){console.log(e),a({type:"ADD_MESSAGE",message:e.data.messages.message})}))}}(t,a))}}}))(C),A=a(24),N=a(22),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(e){e.preventDefault(),a.props.logoutArtist(),console.log("logged_out"),window.location.reload(!1)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(A.a,{expand:"sm",variant:"dark"},r.a.createElement(A.a.Brand,{href:"/"},"BeatTree"),r.a.createElement(N.b,{to:"/artist",style:{marginRight:10}},"|Artist|"),r.a.createElement(A.a.Brand,{onClick:this.handleLogout},"logout")))}}]),t}(n.Component),k=Object(d.b)((function(e){return{artist:e.artist.artist,loggedIn:e.artist.loggedIn}}),(function(e){return{logoutArtist:function(t){return e((function(e,t){g.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(t){t.data.logged_in&&e({type:"LOGOUT_ARTIST"})}))}))}}}))(j),w=function(){return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(A.a,{expand:"sm",variant:"dark"},r.a.createElement(A.a.Brand,{href:"/"},"BeatTree"),r.a.createElement(N.b,{to:"/artist/ArtistLogin",style:{marginRight:10}},"LogIn"),r.a.createElement(N.b,{to:"/artist/ArtistSignup",style:{marginRight:10}},"SignUp")))},G=function(e){var t=e.loggedIn?r.a.createElement(k,null):r.a.createElement(w,null);return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(A.a,{expand:"sm",variant:"dark"},t,r.a.createElement("div",{className:"current-user"})))},T=function(e){var t=e.messages?e.messages.map((function(e,t){return e.message})):r.a.createElement("div",null,"LOADINGGGGG");return r.a.createElement("div",{className:"message-insert"},t.map((function(e){return r.a.createElement("div",{className:"messages"},e)})))},_=function(e){var t=e.favorites?e.favorites.map((function(e,t){return r.a.createElement(S.a,{className:"react-player",key:t,url:e.link,width:"100%",height:"50%"})})):r.a.createElement("div",null,"LOADINGGGGG");return r.a.createElement("div",{className:"favorites-insert"},t)},L=a(68),D=(a(108),a(109),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.loginArtist(a.state)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return"LOGIN SUCCESS"===this.props.authError?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",{className:"login-title"},"ARTIST LOGIN"),r.a.createElement(v.a,{className:"log-in",onSubmit:this.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{controlId:"formGridEmail"},r.a.createElement(v.a.Label,null,"Email"),r.a.createElement(v.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleChange,value:t})),r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridPassword"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange,value:a}))),r.a.createElement("span",{className:"login-failed"},this.props.authError),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"dark",type:"submit"},"Login"),r.a.createElement("br",null),r.a.createElement("div",null,"or ",r.a.createElement(N.a,{to:"/artist/ArtistSignup"},"sign up"))))}}]),t}(n.Component)),R=Object(d.b)((function(e){return console.log(e),{authError:e.artist.authError}}),(function(e){return{loginArtist:function(t){return e(function(e){return function(t){console.log(e),g.a.post("http://localhost:3001/login",{artist:{email:e.email,password:e.password}},{withCredentials:!0}).then((function(e){console.log(e),e.data.logged_in?t({type:"LOGIN_ARTIST",artist:e.data.artist,loggedIn:e.data.logged_in}):t({type:"LOGIN_FAILED"})}))}}(t))}}}))(D),F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",city:"",state:"",link:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.createArtist(a.state)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(console.log(this.props),"SIGNUP SUCCESS"===this.props.authError)return r.a.createElement(h.a,{to:"/"});var e=this.state,t=e.email,a=e.password,n=e.city,s=e.state,l=e.link;return r.a.createElement("div",null,r.a.createElement("h1",{className:"signup-title"},"ARTIST SIGNUP"),r.a.createElement("h3",{className:"sub-title"},"Create a Profile"),r.a.createElement(v.a,{className:"signup-form",onSubmit:this.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{controlId:"formGridEmail"},r.a.createElement(v.a.Label,null,"Email"),r.a.createElement(v.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleChange,value:t})),r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridPassword"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange,value:a}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridCity"},r.a.createElement(v.a.Label,null,"City"),r.a.createElement(v.a.Control,{type:"city",name:"city",placholder:"City",onChange:this.handleChange,value:n})),r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridState"},r.a.createElement(v.a.Label,null,"State"),r.a.createElement(v.a.Control,{type:"city",name:"state",placeholder:"city",onChange:this.handleChange,value:s})),r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridLink"},r.a.createElement(v.a.Label,null,"SoundCloud Link"),r.a.createElement(v.a.Control,{type:"link",name:"link",placeholder:"link",onChange:this.handleChange,value:l}))),r.a.createElement("span",{className:"login-failed"},this.props.authError),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"dark",type:"submit"},"Submit")))}}]),t}(n.Component),U=Object(d.b)((function(e){return console.log(e),{authError:e.artist.authError}}),(function(e){return{createArtist:function(t){return e(function(e){return function(t){g.a.post("http://localhost:3001/artists",{artist:{email:e.email,password:e.password,city:e.city,state:e.state,link:e.link}},{withCredentials:!0}).then((function(e){console.log(e),"created"===e.data.status?t({type:"CREATE_ARTIST",artist:e.data.artist,loggedIn:e.data.logged_in}):t({type:"SIGNUP_FAILED",error:e.data.errors})}))}}(t))}}}))(F),B=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={link:""},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.editBeat(a.state,a.props.artist.id),window.location.reload(!1)},a.handleBack=function(){a.props.history.push("./")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.link;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,{className:"container-2"},r.a.createElement(S.a,{className:"react-player",key:this.props.artist.id,url:this.props.artist.link,width:"100%",height:"50%"})),r.a.createElement("div",null,r.a.createElement(v.a,{className:"edit-beat",onSubmit:this.handleSubmit},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Group,{as:L.a,controlId:"formGridState"},r.a.createElement(v.a.Label,null),r.a.createElement(v.a.Control,{type:"link",name:"link",placeholder:"new-link",onChange:this.handleChange,value:e}))),r.a.createElement(b.a,{variant:"dark",type:"submit"},"Submit"))))}}]),t}(n.Component),P=Object(d.b)((function(e){return console.log(e),{artist:e.artist.artist}}),(function(e){return{editBeat:function(t,a){return e((n=t,function(e){g.a.patch("http://localhost:3001/artists/`#{artist_id}`",{link:n.link},{withCredentials:!0}).then((function(e){console.log(e)}))}));var n}}}))(B),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){a.props.history.push("/artist/ArtistEdit")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,{className:"artist-container"},r.a.createElement("div",{className:"card-title"},"Artist"),r.a.createElement("div",{className:"card-sub-title"},this.props.artist.email),r.a.createElement("div",{className:"card-sub-title"},this.props.artist.city,", ",this.props.artist.state),r.a.createElement(b.a,{className:"button",type:"button",onClick:this.handleSubmit},"Edit Beat"),r.a.createElement(S.a,{controls:!0,className:"react-player",key:this.props.artist.id,url:this.props.artist.link,width:"100%",height:"50%"})),r.a.createElement("div",null,r.a.createElement(y.a,{className:"artist-container"},r.a.createElement("div",{className:"card-title"},"FAVORITES"),r.a.createElement(_,{favorites:this.props.favorites}))),r.a.createElement("div",null,r.a.createElement(y.a,{className:"artist-container"},r.a.createElement("div",{className:"card-title"},"MESSAGES"),r.a.createElement(T,{messages:this.props.messages}))))}}]),t}(n.Component),x=Object(d.b)((function(e){return{artist:e.artist.artist,loggedIn:e.artist.loggedIn,favorites:e.artist.favorites,messages:e.artist.messages}}))(M),V=a(13),H=Object(V.a)(),J=(a(110),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchArtist()}},{key:"render",value:function(){return this.props.loggedIn||this.props.authError||H.push("/"),r.a.createElement("div",null,r.a.createElement(h.c,{history:H},r.a.createElement(G,{artist:this.props.artist,loggedIn:this.props.loggedIn}),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,component:I}),r.a.createElement(h.b,{path:"/artist",exact:!0,component:x}),r.a.createElement(h.b,{path:"/artist/ArtistLogin",exact:!0,component:R}),r.a.createElement(h.b,{path:"/artist/ArtistSignup",exact:!0,component:U}),r.a.createElement(h.b,{path:"/artist/ArtistEdit",exact:!0,component:P}),r.a.createElement(h.b,{component:T}),r.a.createElement(h.b,{component:_}))))}}]),t}(n.Component)),X=Object(d.b)((function(e){return{artist:e.artist.artist,messages:e.artist.messages,loggedIn:e.artist.loggedIn,authError:e.artist.authError}}),(function(e){return{fetchArtist:function(){return e(E())}}}))(J),q=a(26),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{artist:[],favorites:{},loggedIn:!1,authError:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ARTIST":return console.log("fetch success",t),{artist:t.artist,favorites:t.favorites,messages:t.messages,loggedIn:t.loggedIn};case"CREATE_ARTIST":return console.log("created",t),{artist:t.artist,loggedIn:!0,favorites:t.favorites,messages:t.messages,authError:"SIGNUP SUCCESS"};case"LOGIN_ARTIST":return console.log("login success",t),{artist:t.artist,loggedIn:t.loggedIn,favorites:t.favorites,messages:t.messages,authError:"LOGIN SUCCESS"};case"LOGIN_FAILED":return console.log("login failed"),{authError:"LOGIN FAILED"};case"SIGNUP_FAILED":return console.log("login failed",t.error),{authError:"SIGNUP FAILED"};case"LOGOUT_ARTIST":return console.log(t),{loggedIn:!1,authError:"LOGOUT SUCCESS"};default:return e}},K=a(36),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{beats:[],favorites:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_BEATS":return{beats:t.beats};case"ADD_TO_FAVORITES":return console.log(t),Object(K.a)({},e);default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return Object(K.a)({},e,{artist_favorites:t.favorites});default:return e}},Y=Object(q.c)({beat:Q,artist:z,message:W}),Z=a(71),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,ee=Object(q.e)(Y,$(Object(q.a)(Z.a)));l.a.render(r.a.createElement(d.a,{store:ee},r.a.createElement(X,null)),document.getElementById("root"))},74:function(e,t,a){e.exports=a(111)}},[[74,1,2]]]);
//# sourceMappingURL=main.fb47d024.chunk.js.map